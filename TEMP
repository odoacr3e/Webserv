1. Sintassi e UtilizzoLa sintassi di base è:return code [text]; o return code URL; o return URL;Ecco i tre scenari principali:A. Inviare un Codice di Stato (con testo opzionale)Puoi terminare la richiesta restituendo un codice HTTP (come 403, 404, 500).Nginxlocation /segreto {
    return 403 "Accesso negato!";
}
B. Reindirizzamento (Redirect)È il modo standard per forzare l'uso di HTTPS o spostare traffico tra domini.301: Permanente (i motori di ricerca aggiornano l'indice).302: Temporaneo.Nginxserver {
    listen 80;
    server_name vecchio-sito.it;
    return 301 https://nuovo-sito.it$request_uri;
}
C. Inviare un URL direttamenteSe inserisci un URL che inizia con http://, https:// o $scheme, Nginx assume automaticamente un redirect 302.Nginxlocation /vecchia-pagina {
    return https://esempio.it/nuova-pagina;
}
2. Come si colloca nel flusso di NginxQuando Nginx incontra un return, smette di leggere le direttive successive nello stesso contesto e risponde al client.3. Differenze tra return e rewriteCaratteristicareturnrewriteVelocitàPiù veloce (nessuna regex)Leggermente più lentaScopoTerminare la richiesta / RedirectModificare l'URI internamenteInterruzioneImmediataDipende dal flag (last, break)Uso comunePassaggio a HTTPS, 301, 404Pulizia URL, parametri query4. Esempio Pratico: Forzare HTTPSQuesto è l'uso più comune nel mondo reale. Invece di usare logiche complesse, si mette un return nel blocco che ascolta sulla porta 80:Nginxserver {
    listen 80;
    server_name www.tuosito.it;
    # Sposta tutto il traffico su HTTPS mantenendo l'URI esatto
    return 301 https://$host$request_uri;
}
Prossimo passo consigliatoIl return è perfetto per i redirect globali, ma se devi cambiare l'URL solo "dietro le quinte" senza che l'utente se ne accorga, dovresti usare rewrite.Ti interessa vedere come trasformare un URL dinamico (es. prodotto.php?id=10) in uno statico (es. /prodotto/10) usando rewrite?